<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  margin: 0;
  background: #222;
  min-width: 960px;
}

rect {
  fill: none;
  pointer-events: all;
}

circle {
  fill: none;
  stroke-width: 2.5px;
}

</style>
<head>
    
</head>
<body>
    <script src="https://d3js.org/d3.v3.min.js"></script>

    <script>
        console.log("working")
        var width = Math.max(1150, innerWidth),
            height = Math.max(450, innerHeight);
        
        var i = 0;
        
        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);
        
        svg.append("rect")
            .attr("width", width)
            .attr("height", height)
            // .on("ontouchstart", particle);
            setInterval(() => particle(), 100)
        let x = 0
        let y = 0
        function particle() {
        //   var m = d3.mouse(this);
            m = [600, 400]
        //   console.log(m)
        //   console.log(i)
          
        // x max is 960
        // y max is 500
        if (y == 0) {
            x = x + 50
        } 
        if (x >= 1250) {
            y = y + 20
        }
        if (y >= 550) {
            x = x - 50
        }
        if (x == 0) {
            y = y - 20
        }
        // console.log(x)
        // console.log(y)
          svg.insert("circle", "rect")
              .attr("cx", m[0])
              .attr("cy", m[1])
              .attr("r", 1e-6)
              .style("stroke", d3.hsl((i = (i + 1) % 360), 1, .5))
              .style("stroke-opacity", 1)
            .transition()
              .duration(2000)
              .attr("cx", x)
              .attr("cy", y)
              .ease(Math.sqrt)
              .attr("r", 100)
              .style("stroke-opacity", 1e-6)
              .remove()

        svg.insert("circle", "rect")
              .attr("cx", m[0] + 10)
              .attr("cy", m[1] + 10)
              .attr("r", 1e-6)
              .style("stroke", d3.hsl((i = (i + 1) % 360), 1, .5))
              .style("stroke-opacity", 1)
            .transition()
              .duration(2000)
              .attr("cx", x)
              .attr("cy", y)
              .ease(Math.sqrt)
              .attr("r", 100)
              .style("stroke-opacity", 1e-6)
              .remove()


              svg.insert("circle", "rect")
              .attr("cx", m[0])
              .attr("cy", m[1] + 15)
              .attr("r", 1e-6)
              .style("stroke", d3.hsl((i = (i + 1) % 360), 1, .5))
              .style("stroke-opacity", 1)
            .transition()
              .duration(2000)
              .attr("cx", x)
              .attr("cy", y)
              .ease(Math.sqrt)
              .attr("r", 100)
              .style("stroke-opacity", 1e-6)
              .remove()

        //   d3.event.preventDefault();
        }
        
        </script>
        
</body>
   
